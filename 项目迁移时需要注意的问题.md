# 项目在新的服务器安装时需要注意的问题（主要是根据Gemini回答的总结）：
首先python的版本不是越新就越好，适合量化的版本基本就是3.10
数据库测试文件在test_db.py文件中，经过测试是能跑通的。
## 安装Oracle Instant Client 动态链接库1. 下载并安装库文件
你可以直接从 Oracle 官网下载，但在 GCP Ubuntu 上最快的方法是使用 wget：

Bash

### 创建一个存放库文件的目录
mkdir -p ~/opt/oracle
cd ~/opt/oracle

### 下载 Instant Client (Basic Lite 即可满足大部分需求)
wget https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-basiclite-linux.x64-21.1.0.0.0.zip

### 安装解压工具
`sudo apt install unzip -y`

### 解压
unzip instantclient-basiclite-linux.x64-21.1.0.0.0.zip
1. 安装系统依赖库 Oracle 客户端依赖 libaio：
`sudo apt update
 sudo apt install libaio1 -y`
2. 配置环境变量 (让系统能找到 libclntsh.so)
你需要把这个路径告诉系统。将路径添加到你的 .bashrc 中：
- 获取绝对路径并写入配置
`echo "export LD_LIBRARY_PATH=\$HOME/opt/oracle/instantclient_21_1:\$LD_LIBRARY_PATH" >> ~/.bashrc
`
- 刷新配置
`source ~/.bashrc`


### 针对你的 Ubuntu 22.04 (GCP 实例) 环境，安装 Conda 和 Git 的步骤如下。由于你是在云服务器（Headless 环境）上操作，建议安装轻量级的 Miniconda。

1. 安装 Git
Ubuntu 系统通常预装了 Git，如果没有，可以使用以下命令：

# 更新软件包列表
`sudo apt update`

# 安装 Git
`sudo apt install git -y`

# 验证安装
`git --version`
2. 安装 Conda (推荐 Miniconda)
Miniconda 比 Anaconda 更小巧，非常适合服务器环境。

- 第一步：下载安装脚本
使用 wget 下载最新的 Linux 64 位安装包：
`wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
`
- 第二步：运行安装脚本
执行脚本并按照提示操作：
`bash Miniconda3-latest-Linux-x86_64.sh`
按回车键阅读条款，按 q 退出阅读。
输入 yes 同意条款。

确认安装路径（默认通常是 /home/用户名/miniconda3，直接按回车即可）。

最后一步询问是否运行 conda init，建议输入 yes，这样每次登录会自动激活 Conda。

第三步：激活配置
安装完成后，你需要刷新终端才能使用 conda 命令：
`source ~/.bashrc`
第四步：验证安装
`conda --version`
3. 进阶建议：配置 Git 和 Conda 镜像（可选）
如果你在国内使用或为了提升速度，可以进行简单配置：

配置 Git 用户信息
`git config --global user.name "你的名字"
git config --global user.email "你的邮箱"`
配置 Conda 常用命令（备忘）
既然你要跑量化或回测系统，建议创建一个独立的虚拟环境：
- 创建一个名为 stock_test 的 Python 3.10 环境
`conda create -n stock_test python=3.10 -y`

- 激活环境
`conda activate stock_test`

- 退出环境
`conda deactivate`

## 上面的回答在安装conda的时候会出现问题，需要执行下面的添加环境变量
第一步：确认安装目录是否存在
首先确认 Miniconda 是否真的安装到了你的目录下。请运行：
`ls ~/miniconda3/bin/conda`
如果显示路径：说明安装成功了，只是系统找不到它。请跳到第二步。

如果显示 No such file or directory：说明之前的安装失败了。请重新运行 bash Miniconda3-latest-Linux-x86_64.sh，并留意是否有错误提示（比如磁盘空间不足）。

第二步：手动强制激活（最快解决方法）
如果目录存在，直接运行以下命令，将 Conda 路径临时加入当前会话：
`export PATH="$HOME/miniconda3/bin:$PATH"`
现在尝试输入 conda --version。如果成功显示版本号，请立即运行以下命令永久绑定：
`conda init bash
source ~/.bashrc`
第三步：如果还是不行（彻底手动配置）
如果 conda init 依然报错，你可以手动将配置写入 .bashrc 文件：

使用 nano 打开配置文件：
nano ~/.bashrc
翻到文件最底部，添加下面这一行（假设你安装在默认的 miniconda3）：
export PATH="$HOME/miniconda3/bin:$PATH"
按 Ctrl + O 保存，按 Enter 确认，按 Ctrl + X 退出。

刷新配置：
`source ~/.bashrc`



