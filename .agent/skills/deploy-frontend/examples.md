# éƒ¨ç½²å‰ç«¯é¡¹ç›®ç¤ºä¾‹

## åœºæ™¯ 1ï¼šé¦–æ¬¡éƒ¨ç½²

**ç”¨æˆ·è¯·æ±‚**: "å¸®æˆ‘éƒ¨ç½²å‰ç«¯é¡¹ç›®åˆ°æœåŠ¡å™¨"

**æ‰§è¡Œæ­¥éª¤**:

1. **æ”¶é›†ä¿¡æ¯**
   ```
   è¯¢é—®ï¼š
   - å‰ç«¯é¡¹ç›®è·¯å¾„ï¼Ÿ
   - æœåŠ¡å™¨ IP æˆ– SSH åˆ«åï¼Ÿ
   - éƒ¨ç½²ç›®å½•ï¼Ÿï¼ˆé€šå¸¸ /var/www/distï¼‰
   - ç”Ÿäº§ç¯å¢ƒ API åœ°å€ï¼Ÿ
   ```

2. **æ£€æŸ¥ç¯å¢ƒé…ç½®**
   ```bash
   # æ£€æŸ¥ .env.production
   view_file /path/to/project/.env.production
   
   # å¦‚ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ
   write_to_file .env.production
   ```

3. **é…ç½®æ„å»ºä¼˜åŒ–**
   ```bash
   # æ£€æŸ¥ vite.config.js
   view_file /path/to/project/vite.config.js
   
   # æ·»åŠ ç”Ÿäº§æ„å»ºé…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
   ```

4. **æ‰§è¡Œæ„å»º**
   ```bash
   run_command "npm run build" in project_dir
   ```

5. **åˆ›å»ºéƒ¨ç½²è„šæœ¬**
   ```bash
   # ä» skill æ¨¡æ¿å¤åˆ¶
   cp .agent/skills/deploy-frontend/deploy-template.sh deploy.sh
   
   # ä¿®æ”¹é…ç½®
   # è®¾ç½®æ‰§è¡Œæƒé™
   chmod +x deploy.sh
   ```

6. **æ‰§è¡Œéƒ¨ç½²**
   ```bash
   run_command "./deploy.sh" in project_dir
   ```

7. **éªŒè¯éƒ¨ç½²**
   ```
   æç¤ºç”¨æˆ·è®¿é—®ç½‘ç«™å¹¶æµ‹è¯•åŠŸèƒ½
   ```

---

## åœºæ™¯ 2ï¼šæ›´æ–°éƒ¨ç½²

**ç”¨æˆ·è¯·æ±‚**: "æˆ‘ä¿®æ”¹äº†ä»£ç ï¼Œå¸®æˆ‘é‡æ–°éƒ¨ç½²"

**æ‰§è¡Œæ­¥éª¤**:

1. **ç¡®è®¤é¡¹ç›®è·¯å¾„**
   ```bash
   cd /path/to/project
   ```

2. **æ£€æŸ¥æ˜¯å¦æœ‰éƒ¨ç½²è„šæœ¬**
   ```bash
   # æ£€æŸ¥ deploy.sh æ˜¯å¦å­˜åœ¨
   if exists deploy.sh:
       ç›´æ¥ä½¿ç”¨
   else:
       ä» skill åˆ›å»º
   ```

3. **æ‰§è¡Œæ„å»ºå’Œéƒ¨ç½²**
   ```bash
   npm run build && ./deploy.sh
   ```

---

## åœºæ™¯ 3ï¼šå›æ»šç‰ˆæœ¬

**ç”¨æˆ·è¯·æ±‚**: "æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå¸®æˆ‘å›æ»š"

**æ‰§è¡Œæ­¥éª¤**:

1. **æ‰§è¡Œå›æ»šå‘½ä»¤**
   ```bash
   ssh server "sudo rm -rf /var/www/dist && \
               sudo mv /var/www/dist.bac /var/www/dist && \
               sudo systemctl reload nginx"
   ```

2. **éªŒè¯å›æ»š**
   ```
   æç¤ºç”¨æˆ·åˆ·æ–°æµè§ˆå™¨ç¡®è®¤
   ```

---

## åœºæ™¯ 4ï¼šæŸ¥çœ‹æ—¥å¿—

**ç”¨æˆ·è¯·æ±‚**: "ç½‘ç«™æœ‰é—®é¢˜ï¼Œå¸®æˆ‘çœ‹çœ‹æ—¥å¿—"

**æ‰§è¡Œæ­¥éª¤**:

1. **æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—**
   ```bash
   ssh server "sudo tail -50 /var/log/nginx/error.log"
   ```

2. **æŸ¥çœ‹è®¿é—®æ—¥å¿—**
   ```bash
   ssh server "sudo tail -50 /var/log/nginx/access.log"
   ```

3. **åˆ†æé—®é¢˜å¹¶æä¾›è§£å†³æ–¹æ¡ˆ**

---

## åœºæ™¯ 5ï¼šå¤šç¯å¢ƒéƒ¨ç½²

**ç”¨æˆ·è¯·æ±‚**: "å¸®æˆ‘éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ"

**æ‰§è¡Œæ­¥éª¤**:

1. **åˆ›å»ºæµ‹è¯•ç¯å¢ƒé…ç½®**
   ```env
   # .env.staging
   VITE_API_BASE_URL=https://api-staging.domain.com
   ```

2. **ä¿®æ”¹éƒ¨ç½²è„šæœ¬**
   ```bash
   # æˆ–åˆ›å»ºå•ç‹¬çš„ deploy-staging.sh
   SERVER_HOST="staging-server-ip"
   DOMAIN="staging.domain.com"
   ```

3. **æ‰§è¡Œéƒ¨ç½²**
   ```bash
   npm run build -- --mode staging
   ./deploy-staging.sh
   ```

---

## å®Œæ•´å¯¹è¯ç¤ºä¾‹

**ç”¨æˆ·**: "å¸®æˆ‘éƒ¨ç½²å‰ç«¯é¡¹ç›®"

**AI**: "å¥½çš„ï¼æˆ‘æ¥å¸®æ‚¨éƒ¨ç½²å‰ç«¯é¡¹ç›®ã€‚è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. å‰ç«¯é¡¹ç›®è·¯å¾„
2. æœåŠ¡å™¨ IP æˆ– SSH åˆ«å
3. ç”Ÿäº§ç¯å¢ƒ API åœ°å€"

**ç”¨æˆ·**: "é¡¹ç›®åœ¨ /Users/me/vue-appï¼ŒæœåŠ¡å™¨æ˜¯ oracle555ï¼ŒAPI æ˜¯ https://api.example.com"

**AI**: 
```
å¼€å§‹æ‰§è¡Œéƒ¨ç½²...

æ­¥éª¤ 1: æ£€æŸ¥ç¯å¢ƒé…ç½®
âœ“ åˆ›å»º .env.production

æ­¥éª¤ 2: ä¼˜åŒ–æ„å»ºé…ç½®
âœ“ æ›´æ–° vite.config.js

æ­¥éª¤ 3: æ‰§è¡Œæ„å»º
âœ“ npm run build æˆåŠŸ

æ­¥éª¤ 4: åˆ›å»ºéƒ¨ç½²è„šæœ¬
âœ“ deploy.sh å·²åˆ›å»º

æ­¥éª¤ 5: æ‰§è¡Œéƒ¨ç½²
ğŸ“¦ å¤‡ä»½æ—§ç‰ˆæœ¬...
ğŸ“¤ ä¸Šä¼ æ–‡ä»¶...
ğŸ“ éƒ¨ç½²æ–‡ä»¶...
ğŸ”„ é‡å¯ Nginx...
âœ… éƒ¨ç½²å®Œæˆï¼

è¯·è®¿é—® https://your-domain.com æµ‹è¯•
```

---

## æ•…éšœå¤„ç†å¯¹è¯ç¤ºä¾‹

**ç”¨æˆ·**: "éƒ¨ç½²åé¡µé¢æ˜¯ç©ºç™½çš„"

**AI**: "è®©æˆ‘å¸®æ‚¨æ’æŸ¥é—®é¢˜ã€‚é¦–å…ˆæ£€æŸ¥å‡ ä¸ªæ–¹é¢ï¼š

1. API åœ°å€é…ç½®
2. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
3. Nginx é…ç½®

è¯·æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼Œå‘Šè¯‰æˆ‘ Console æ ‡ç­¾ä¸­æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯ã€‚"

**ç”¨æˆ·**: "æ˜¾ç¤º API è¯·æ±‚å¤±è´¥ 404"

**AI**: "é—®é¢˜å¯èƒ½æ˜¯ API åœ°å€é…ç½®é”™è¯¯ã€‚è®©æˆ‘æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥ .env.production
cat .env.production
```

æ‚¨çš„ API åœ°å€åº”è¯¥æ˜¯ `https://api.example.com`ï¼Œå¦‚æœä¸å¯¹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®å¤å®ƒå¹¶é‡æ–°éƒ¨ç½²ã€‚"
