# Celery Worker 启动脚本
# 用于查看回测任务的详细日志

# 使用方法:
# 1. 在 vueStockapi 目录下运行此脚本
# 2. 观察控制台输出,会显示详细的回测过程

# Windows PowerShell:
# celery -A vueStockapi worker -l info --pool=solo

# Linux/Mac:
# celery -A vueStockapi worker -l info

说明:
- `-A vueStockapi`: 指定 Celery app
- `worker`: 启动 worker 进程
- `-l info`: 日志级别设置为 INFO,显示详细信息
- `--pool=solo`: (Windows) 使用单线程模式,避免 Windows 兼容性问题

日志输出说明:
==========================================================
🚀 回测任务开始
==========================================================
回测引擎: 自定义引擎/Backtrader
策略名称: xxx
策略类型: 龙回头
回测区间: 2024-01-01 ~ 2024-12-31
初始资金: 1,000,000.00
单票比例: 10.0%
最大持仓: 60天

【阶段1】加载策略信号...
找到 X 个策略信号
涉及 X 只股票

【阶段2】加载价格数据...

【阶段3】初始化Backtrader...
添加数据源...
已添加 X 个数据源

【阶段4】执行回测...
初始资产: XXX
最终资产: XXX

【阶段5】提取回测结果...
总交易次数: X
盈利次数: X, 亏损次数: X
胜率: X%
总收益率: X%
最大回撤: X%

【阶段6】保存回测结果...
保存了 X 条交易记录
✅ 回测任务完成

==========================================================
